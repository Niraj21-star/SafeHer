# ðŸŽ­ SafeHer - Demo Mode Documentation

## Overview

SafeHer includes a **production-quality demo mode** designed for presentations, evaluations, and demonstrations where external service dependencies should be avoided while maintaining a realistic user experience.

## Quick Start

### Enable Demo Mode

1. Open `backend/.env`
2. Set: `DEMO_MODE=true`
3. Restart backend server: `npm run dev`

### Disable Demo Mode (Production)

1. Open `backend/.env`
2. Set: `DEMO_MODE=false`
3. Configure real API credentials (Twilio, Gmail, etc.)
4. Restart backend server

---

## Features in Demo Mode

### âœ… What Works in Demo Mode

| Feature | Behavior |
|---------|----------|
| **SMS Alerts** | Simulated - logs to console, returns success response |
| **Email Alerts** | Simulated - logs to console, returns success response |
| **Guardian Notifications** | Generates 2 mock nearby guardians with realistic data |
| **AI Legal Assistant** | Returns cached, contextually-relevant legal guidance |
| **FIR Generation** | Full generation with "Draft/Demo" labeling |
| **Location Tracking** | Uses browser GPS or static demo coordinates |
| **User Authentication** | Full Firebase authentication (real) |
| **Database Operations** | Full Firestore operations (real) |

### ðŸ“± SMS & Email Alerts

**Demo Mode Behavior:**
- No external API calls to Twilio or Gmail
- Success responses returned immediately
- Console logs show what would have been sent
- UI displays: *"Emergency SMS alert delivered"*

**Console Output Example:**
```
ðŸ“± [DEMO MODE] SMS sent successfully
   To: +919876543210
   Message: EMERGENCY: User triggered an SOS...
```

### ðŸ‘® Guardian Notifications

**Demo Mode Behavior:**
- Generates 2 realistic mock guardians
- Includes: name, distance (0.5-2.5 km), ETA (5-15 min)
- One guardian marked as "responding"
- UI shows: *"2 nearby guardians notified"*

**Mock Guardian Data:**
```javascript
{
  id: "guardian_demo_1234567890_0",
  name: "Priya Sharma",
  distance: "1.2",
  eta: 8,
  status: "responding"
}
```

### ðŸ’¬ AI Legal Assistant

**Demo Mode Behavior:**
- Returns pre-written, contextually-aware responses
- Includes proper disclaimers
- Responses cover: FIR filing, harassment laws, legal rights
- UI includes: *"Demo response for prototype evaluation"*

**Supported Topics:**
- FIR filing process
- Harassment and stalking laws
- Women's safety rights
- Police interaction guidelines
- Legal remedies

### ðŸ“„ FIR Generation

**Demo Mode Behavior:**
- Generates complete FIR document
- Uses real incident data from user input
- Includes disclaimer labels
- Fully downloadable/copyable

**Labeling:**
- âš ï¸ Header: "DRAFT FIRST INFORMATION REPORT"
- Disclaimer: "This is a DRAFT document generated by SafeHer AI"
- Footer: "Generated by SafeHer - AI-Powered Women Safety Platform"

---

## Technical Implementation

### Architecture

Demo mode logic is centralized in `/backend/src/services/demoService.js`:

```javascript
import { isDemoMode, simulateSMSDelivery } from './demoService.js';

export const sendEmergencySMS = async ({ to, body }) => {
    if (isDemoMode()) {
        return simulateSMSDelivery(to, body);
    }
    // Real implementation...
};
```

### Service Coverage

| Service | File | Demo Support |
|---------|------|--------------|
| SMS | `smsService.js` | âœ… Full |
| Email | `emailService.js` | âœ… Full |
| Legal AI | `openaiService.js` | âœ… Full |
| Guardian Alerts | `routes/sos.js` | âœ… Full |
| FIR Generation | `openaiService.js` | âœ… Labels included |

### Environment Variables

```env
# Required for Demo Mode
DEMO_MODE=true

# Optional - can be empty in demo mode
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
GMAIL_USER=
GMAIL_APP_PASSWORD=
OPENAI_API_KEY=
GEMINI_API_KEY=
```

---

## Testing Demo Mode

### End-to-End SOS Flow

1. **Login** to SafeHer application
2. **Trigger SOS** button on dashboard
3. **Verify:**
   - âœ… SMS alerts logged to console
   - âœ… Email alerts logged to console
   - âœ… 2 guardians appear as "notified"
   - âœ… No external API errors
   - âœ… UI shows success messages

### Legal Assistant Flow

1. Navigate to **Legal Assistance**
2. Ask: *"How do I file an FIR?"*
3. **Verify:**
   - âœ… Receives relevant legal guidance
   - âœ… Includes disclaimer at bottom
   - âœ… No AI API errors
   - âœ… Response appears instantly

### FIR Generation Flow

1. Navigate to **FIR Generator**
2. Fill incident details
3. **Generate FIR**
4. **Verify:**
   - âœ… Complete FIR document generated
   - âœ… Includes "DRAFT" header
   - âœ… Contains disclaimer
   - âœ… Downloadable/copyable

---

## Console Output Examples

### Server Startup (Demo Mode)
```
ðŸš€ SafeHer API running on port 5000
ðŸ“ Health check: http://localhost:5000/health

ðŸŽ­ ========================================
   DEMO MODE ENABLED
   External services will be simulated
   Responses will be realistic but not real
========================================
```

### SOS Triggered
```
ðŸ“± [DEMO MODE] SMS sent successfully
   To: +919876543210
   Message: EMERGENCY: NIRAJ KARNAWAT triggered...

ðŸ“§ [DEMO MODE] Email sent successfully
   To: contact@example.com
   Subject: ðŸš¨ EMERGENCY ALERT from NIRAJ KARNAWAT

ðŸ‘® [DEMO MODE] 2 guardians notified successfully
```

### Legal Query
```
ðŸ’¬ [DEMO MODE] Generating legal response
```

---

## Switching to Production

### Step 1: Update Environment

```env
DEMO_MODE=false
```

### Step 2: Configure Real Services

**Twilio (SMS):**
```env
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
```

**Gmail (Email):**
```env
GMAIL_USER=your-email@gmail.com
GMAIL_APP_PASSWORD=your-16-char-app-password
```

**Gemini AI (Legal Assistant):**
```env
GEMINI_API_KEY=AIzaSyxxxxxxxxxxxxx
GEMINI_MODEL=gemini-2.0-flash
```

### Step 3: Restart Server

```bash
cd backend
npm run dev
```

### Step 4: Verify Real Mode

- Check console - no "DEMO MODE ENABLED" banner
- SMS/Email should use real APIs
- AI responses from Gemini API

---

## Best Practices

### For Demonstrations

âœ… **DO:**
- Enable demo mode before presentations
- Test full flow beforehand
- Keep demo mode on for judge evaluations
- Use realistic test data

âŒ **DON'T:**
- Switch modes during active demo
- Show console logs with [DEMO MODE] to judges
- Use demo mode in production
- Forget to disable demo mode after presentations

### For Development

âœ… **DO:**
- Use demo mode during local testing
- Save API costs with demo mode
- Test logic without external dependencies
- Keep demo responses up-to-date

âŒ **DON'T:**
- Deploy with DEMO_MODE=true
- Mix demo and real API calls
- Skip testing real mode before deployment

---

## UI/UX Guidelines

### User-Facing Messages

#### âœ… Good (Use These)
- *"Emergency alert delivered"*
- *"2 nearby guardians notified"*
- *"Demo response for prototype evaluation"*
- *"Simulated for demonstration purposes"*

#### âŒ Bad (Avoid These)
- *"Mock SMS sent"*
- *"Fake guardian notification"*
- *"This is not real"*
- *"Test mode active"*

### Disclaimers

Place subtle disclaimers where appropriate:

**Legal AI:**
```
*This is a simulated response for prototype evaluation. 
Please consult a qualified legal professional for actual advice.*
```

**FIR Generator:**
```
âš ï¸ IMPORTANT DISCLAIMER:
This is a DRAFT document generated by SafeHer AI.
```

---

## Troubleshooting

### Issue: Demo mode not working

**Solution:**
```bash
# Check .env file
cat backend/.env | grep DEMO_MODE

# Should show:
DEMO_MODE=true

# Restart server
npm run dev
```

### Issue: Still seeing API errors in demo mode

**Possible Causes:**
1. `.env` not updated
2. Server not restarted
3. Cache issues

**Solution:**
```bash
# Clear and restart
cd backend
rm -rf node_modules/.cache
npm run dev
```

### Issue: Guardians not appearing

**Check:**
1. Demo mode enabled
2. Console shows: `ðŸ‘® [DEMO MODE] 2 guardians notified`
3. Response includes `guardiansNotified` array

---

## Appendix

### File Structure

```
backend/
â”œâ”€â”€ .env (DEMO_MODE flag here)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js (logs demo status)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ demoService.js (central demo logic)
â”‚   â”‚   â”œâ”€â”€ smsService.js (demo support)
â”‚   â”‚   â”œâ”€â”€ emailService.js (demo support)
â”‚   â”‚   â””â”€â”€ openaiService.js (demo support)
â”‚   â””â”€â”€ routes/
â”‚       â””â”€â”€ sos.js (demo guardians)
```

### Demo Service API

```javascript
// Check if demo mode is active
isDemoMode() => boolean

// Simulate SMS delivery
simulateSMSDelivery(to, message) => { success, demo, sid, timestamp }

// Simulate email delivery
simulateEmailDelivery(to, subject) => { success, demo, messageId, timestamp }

// Generate mock guardians
generateDemoGuardians(count) => [{ id, name, distance, eta, status }]

// Get legal response
getDemoLegalResponse(query) => string

// Log demo status on startup
logDemoModeStatus() => void
```

---

## Support

For questions or issues related to demo mode:

1. Check console logs for `[DEMO MODE]` indicators
2. Verify `.env` configuration
3. Review this documentation
4. Check GitHub issues/discussions

**Demo Mode Version:** 1.0  
**Last Updated:** February 2026  
**Compatibility:** SafeHer MVP v1.0+
